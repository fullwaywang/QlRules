commit 8809fa2058b48157015354d3893170a191afdab3	8809fa2058b48157015354d3893170a191afdab3
Author: Jan Keitel <jkeitel@google.com>
Date:   Tue Jan 23 13:48:33 2024 +0000

    Clean up kAutofillPopupExtensionCursorSuppression.
    
    This feature was default-enabled in M121 and can now be cleaned up.
    
    Bug: 1497985
    Change-Id: Ia7208eff1eef7271d2d00fce13e52ebaf641ebf3
    Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/5222523
    Auto-Submit: Jan Keitel <jkeitel@google.com>
    Commit-Queue: Jan Keitel <jkeitel@google.com>
    Reviewed-by: Timofey Chudakov <tchudakov@google.com>
    Cr-Commit-Position: refs/heads/main@{#1250782}

diff --git a/chrome/browser/ui/views/autofill/popup/custom_cursor_suppressor.cc b/chrome/browser/ui/views/autofill/popup/custom_cursor_suppressor.cc
index 75f2c88e2d2f5..38115ad725e48 100644
--- a/chrome/browser/ui/views/autofill/popup/custom_cursor_suppressor.cc
+++ b/chrome/browser/ui/views/autofill/popup/custom_cursor_suppressor.cc
@@ -9,12 +9,10 @@
 #include <utility>
 #include <vector>
 
-#include "base/feature_list.h"
 #include "chrome/browser/profiles/profile.h"
 #include "chrome/browser/ui/browser.h"
 #include "chrome/browser/ui/browser_list.h"
 #include "chrome/browser/ui/tabs/tab_strip_model.h"
-#include "components/autofill/core/common/autofill_features.h"
 #include "content/public/browser/browser_context.h"
 #include "content/public/browser/global_routing_id.h"
 #include "content/public/browser/render_frame_host.h"
@@ -60,10 +58,7 @@ void CustomCursorSuppressor::Start(int max_dimension_dips) {
       MaybeObserveNavigationsInWebContents(*active_contents);
       SuppressForWebContents(*active_contents);
     }
-    if (base::FeatureList::IsEnabled(
-            autofill::features::kAutofillPopupExtensionCursorSuppression)) {
-      ObserveAndSuppressExtensionsForProfile(*browser->profile());
-    }
+    ObserveAndSuppressExtensionsForProfile(*browser->profile());
   }
 }
 
diff --git a/components/autofill/core/common/autofill_features.cc b/components/autofill/core/common/autofill_features.cc
index ee46598ca07ae..cc3cd12874e23 100644
--- a/components/autofill/core/common/autofill_features.cc
+++ b/components/autofill/core/common/autofill_features.cc
@@ -462,12 +462,6 @@ BASE_FEATURE(kAutofillPopupDoesNotOverlapWithContextMenu,
              "AutofillPopupDoesNotOverlapWithContextMenu",
              base::FEATURE_DISABLED_BY_DEFAULT);
 
-// If the feature is enabled, then custom cursor exceeding the (24 dips)
-// dimension limit are disallowed in extension-hosted content.
-BASE_FEATURE(kAutofillPopupExtensionCursorSuppression,
-             "AutofillPopupExtensionCursorSuppression",
-             base::FEATURE_ENABLED_BY_DEFAULT);
-
 // If the feature is enabled, then the time when the Autofill popup is
 // considered to have been shown is measured only once the UI thread has become
 // idle. The intent behind this is to avoid situations in which the OS message
diff --git a/components/autofill/core/common/autofill_features.h b/components/autofill/core/common/autofill_features.h
index abbe88d3091a6..17eb2fbb2d4ed 100644
--- a/components/autofill/core/common/autofill_features.h
+++ b/components/autofill/core/common/autofill_features.h
@@ -148,8 +148,6 @@ BASE_DECLARE_FEATURE(kAutofillPopupDisablePaintChecks);
 COMPONENT_EXPORT(AUTOFILL)
 BASE_DECLARE_FEATURE(kAutofillPopupDoesNotOverlapWithContextMenu);
 COMPONENT_EXPORT(AUTOFILL)
-BASE_DECLARE_FEATURE(kAutofillPopupExtensionCursorSuppression);
-COMPONENT_EXPORT(AUTOFILL)
 BASE_DECLARE_FEATURE(kAutofillPopupImprovedTimingChecks);
 COMPONENT_EXPORT(AUTOFILL)
 BASE_DECLARE_FEATURE(kAutofillPopupUseLatencyInformationForAcceptThreshold);
