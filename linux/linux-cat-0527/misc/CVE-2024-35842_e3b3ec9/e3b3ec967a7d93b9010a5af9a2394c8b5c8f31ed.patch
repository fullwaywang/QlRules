commit e3b3ec967a7d93b9010a5af9a2394c8b5c8f31ed
Author: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Date:   Thu Jan 11 11:52:26 2024 +0100

    ASoC: mediatek: sof-common: Add NULL check for normal_link string
    
    It's not granted that all entries of struct sof_conn_stream declare
    a `normal_link` (a non-SOF, direct link) string, and this is the case
    for SoCs that support only SOF paths (hence do not support both direct
    and SOF usecases).
    
    For example, in the case of MT8188 there is no normal_link string in
    any of the sof_conn_stream entries and there will be more drivers
    doing that in the future.
    
    To avoid possible NULL pointer KPs, add a NULL check for `normal_link`.
    
    Fixes: 0caf1120c583 ("ASoC: mediatek: mt8195: extract SOF common code")
    Signed-off-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
    Link: https://msgid.link/r/20240111105226.117603-1-angelogioacchino.delregno@collabora.com
    Signed-off-by: Mark Brown <broonie@kernel.org>

diff --git a/sound/soc/mediatek/common/mtk-dsp-sof-common.c b/sound/soc/mediatek/common/mtk-dsp-sof-common.c
index f3894010f656..7ec8965a70c0 100644
--- a/sound/soc/mediatek/common/mtk-dsp-sof-common.c
+++ b/sound/soc/mediatek/common/mtk-dsp-sof-common.c
@@ -24,7 +24,7 @@ int mtk_sof_dai_link_fixup(struct snd_soc_pcm_runtime *rtd,
 		struct snd_soc_dai_link *sof_dai_link = NULL;
 		const struct sof_conn_stream *conn = &sof_priv->conn_streams[i];
 
-		if (strcmp(rtd->dai_link->name, conn->normal_link))
+		if (conn->normal_link && strcmp(rtd->dai_link->name, conn->normal_link))
 			continue;
 
 		for_each_card_rtds(card, runtime) {
