commit 2567d8e42b1784ba1c535bda32cb235d237cdcc7	2567d8e42b1784ba1c535bda32cb235d237cdcc7
Author: Valerie Young <spectranaut@igalia.com>
Date:   Mon Jan 30 19:06:45 2023 +0000

    Remove use of g_utf8_substring
    
    Bug: 1406588
    Change-Id: Iae03fce3d8332fdc5144b9b80a9ba146bf359693
    Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/4201191
    Reviewed-by: David Tseng <dtseng@chromium.org>
    Commit-Queue: Valerie Young <spectranaut@igalia.com>
    Cr-Commit-Position: refs/heads/main@{#1098756}

diff --git a/ui/accessibility/platform/inspect/ax_tree_formatter_auralinux.cc b/ui/accessibility/platform/inspect/ax_tree_formatter_auralinux.cc
index c89129f794051..6e5226a301841 100644
--- a/ui/accessibility/platform/inspect/ax_tree_formatter_auralinux.cc
+++ b/ui/accessibility/platform/inspect/ax_tree_formatter_auralinux.cc
@@ -229,13 +229,9 @@ void AXTreeFormatterAuraLinux::AddHypertextProperties(
       gchar* link_start = g_utf8_offset_to_pointer(character_text, utf8_offset);
       int offset = link_start - character_text;
 
-      gchar* character_substring =
-          g_utf8_substring(character_text, utf8_offset, utf8_offset + 1);
-      DCHECK(std::string(character_substring) == "\uFFFC");
-
-      base::ReplaceFirstSubstringAfterOffset(&text, offset, character_substring,
+      std::string replacement_char = "\uFFFC";
+      base::ReplaceFirstSubstringAfterOffset(&text, offset, replacement_char,
                                              link_str);
-      g_free(character_substring);
     }
   }
 
