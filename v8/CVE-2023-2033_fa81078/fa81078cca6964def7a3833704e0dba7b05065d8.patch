commit fa81078cca6964def7a3833704e0dba7b05065d8	fa81078cca6964def7a3833704e0dba7b05065d8
Author: Igor Sheludko <ishell@chromium.org>
Date:   Wed Apr 12 16:12:16 2023 +0200

    [runtime] Make Error.captureStackTrace() a no-op for global object
    
    Bug: chromium:1432210
    Change-Id: I8aa4c3f1d9ecbfffce503085c2879416ff916c69
    Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/4417690
    Commit-Queue: Igor Sheludko <ishell@chromium.org>
    Reviewed-by: Tobias Tebbi <tebbi@chromium.org>
    Commit-Queue: Tobias Tebbi <tebbi@chromium.org>
    Auto-Submit: Igor Sheludko <ishell@chromium.org>
    Cr-Commit-Position: refs/heads/main@{#87045}

diff --git a/src/builtins/builtins-error.cc b/src/builtins/builtins-error.cc
index 01e016252ce..14c06022a9e 100644
--- a/src/builtins/builtins-error.cc
+++ b/src/builtins/builtins-error.cc
@@ -35,6 +35,9 @@ BUILTIN(ErrorCaptureStackTrace) {
     THROW_NEW_ERROR_RETURN_FAILURE(
         isolate, NewTypeError(MessageTemplate::kInvalidArgument, object_obj));
   }
+  if (object_obj->IsJSGlobalProxy()) {
+    return ReadOnlyRoots(isolate).undefined_value();
+  }
 
   Handle<JSObject> object = Handle<JSObject>::cast(object_obj);
   Handle<Object> caller = args.atOrUndefined(isolate, 2);
