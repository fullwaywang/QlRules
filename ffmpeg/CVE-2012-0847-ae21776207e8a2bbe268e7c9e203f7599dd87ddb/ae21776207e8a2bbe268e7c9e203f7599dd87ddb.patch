commit ae21776207e8a2bbe268e7c9e203f7599dd87ddb	ae21776207e8a2bbe268e7c9e203f7599dd87ddb
Author: Stefano Sabatini <stefasab@gmail.com>
Date:   Tue Dec 27 15:15:02 2011 +0100

    lavfi: add missing check in avfilter_filter_samples()
    
    Avoid out-of-buffer data access when nb_channels is 8.

diff --git a/libavfilter/avfilter.c b/libavfilter/avfilter.c
index b4c9fa6593..97f78e4629 100644
--- a/libavfilter/avfilter.c
+++ b/libavfilter/avfilter.c
@@ -678,7 +678,7 @@ void avfilter_filter_samples(AVFilterLink *link, AVFilterBufferRef *samplesref)
         link->cur_buf->audio->sample_rate = samplesref->audio->sample_rate;
 
         /* Copy actual data into new samples buffer */
-        for (i = 0; samplesref->data[i]; i++)
+        for (i = 0; samplesref->data[i] && i < 8; i++)
             memcpy(link->cur_buf->data[i], samplesref->data[i], samplesref->linesize[0]);
 
         avfilter_unref_buffer(samplesref);
