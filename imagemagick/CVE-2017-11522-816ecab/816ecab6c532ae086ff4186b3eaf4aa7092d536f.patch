commit 816ecab6c532ae086ff4186b3eaf4aa7092d536f
Author: Cristy <urban-warrior@imagemagick.org>
Date:   Tue Jul 18 18:12:58 2017 -0400

    https://github.com/ImageMagick/ImageMagick/issues/58

diff --git a/coders/png.c b/coders/png.c
index f6ddf6d7c..c61b6874e 100644
--- a/coders/png.c
+++ b/coders/png.c
@@ -8270,9 +8270,11 @@ static MagickBooleanType WriteOnePNGImage(MngInfo *mng_info,
     "  Enter WriteOnePNGImage()");
 
   image = CloneImage(IMimage,0,0,MagickFalse,exception);
+  if (image == (Image *) NULL)
+    return(MagickFalse);
   image_info=(ImageInfo *) CloneImageInfo(IMimage_info);
   if (image_info == (ImageInfo *) NULL)
-     ThrowWriterException(ResourceLimitError, "MemoryAllocationFailed");
+    ThrowWriterException(ResourceLimitError, "MemoryAllocationFailed");
 
   /* Define these outside of the following "if logging()" block so they will
    * show in debuggers.
