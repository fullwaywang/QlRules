commit 79eeab1d85e0fee4c0bc36f3b6ddf3920f39f74b
Author: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Date:   Fri Feb 17 12:02:26 2023 +0100

    gpio: sim: fix a memory leak
    
    Fix an inverted logic bug in gpio_sim_remove_hogs() that leads to GPIO
    hog structures never being freed.
    
    Fixes: cb8c474e79be ("gpio: sim: new testing module")
    Reported-by: Mirsad Goran Todorovac <mirsad.todorovac@alu.unizg.hr>
    Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
    Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>

diff --git a/drivers/gpio/gpio-sim.c b/drivers/gpio/gpio-sim.c
index 60514bc5454f..9e3893b19e4f 100644
--- a/drivers/gpio/gpio-sim.c
+++ b/drivers/gpio/gpio-sim.c
@@ -736,7 +736,7 @@ static void gpio_sim_remove_hogs(struct gpio_sim_device *dev)
 
 	gpiod_remove_hogs(dev->hogs);
 
-	for (hog = dev->hogs; !hog->chip_label; hog++) {
+	for (hog = dev->hogs; hog->chip_label; hog++) {
 		kfree(hog->chip_label);
 		kfree(hog->line_name);
 	}
