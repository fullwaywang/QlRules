commit 65a913ada7c46baaab65580e31b4d3cc2114973f	65a913ada7c46baaab65580e31b4d3cc2114973f
Author: Manos Koukoutos <manoskouk@chromium.org>
Date:   Mon Jul 10 10:32:59 2023 +0200

    [wasm-gc][liftoff] Fix bug
    
    Bug: chromium:1462951
    Change-Id: I16fb8e2b989f5501c93b55d61a2bb603d5987655
    Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/4675296
    Commit-Queue: Jakob Kummerow <jkummerow@chromium.org>
    Auto-Submit: Manos Koukoutos <manoskouk@chromium.org>
    Reviewed-by: Jakob Kummerow <jkummerow@chromium.org>
    Cr-Commit-Position: refs/heads/main@{#88782}

diff --git a/src/wasm/baseline/liftoff-compiler.cc b/src/wasm/baseline/liftoff-compiler.cc
index a5c6792b945..1bf8f3d6499 100644
--- a/src/wasm/baseline/liftoff-compiler.cc
+++ b/src/wasm/baseline/liftoff-compiler.cc
@@ -1987,7 +1987,7 @@ class LiftoffCompiler {
       }
       case kExprExternExternalize: {
         LiftoffRegList pinned;
-        LiftoffRegister ref = pinned.set(__ PopToRegister(pinned));
+        LiftoffRegister ref = pinned.set(__ PopToModifiableRegister(pinned));
         LiftoffRegister null = __ GetUnusedRegister(kGpReg, pinned);
         LoadNullValueForCompare(null.gp(), pinned, kWasmAnyRef);
         Label label;
