commit 6731adcd0ccea0b1db07f5022f8115b26829e6a7	6731adcd0ccea0b1db07f5022f8115b26829e6a7
Author: Jonathan Hao <phao@chromium.org>
Date:   Thu Aug 3 16:12:56 2023 +0000

    Add hardening CHECK in mojojs for large buffers.
    
    Bug: 1316379
    Change-Id: I7a3a50cd9c1434cc86b4b2aa45a491c812832a3a
    Reviewed-on: https://chromium-review.googlesource.com/c/chromium/src/+/4742429
    Auto-Submit: Jonathan Hao <phao@chromium.org>
    Reviewed-by: Ken Rockot <rockot@google.com>
    Commit-Queue: Ken Rockot <rockot@google.com>
    Cr-Commit-Position: refs/heads/main@{#1179071}

diff --git a/mojo/public/cpp/bindings/lib/message.cc b/mojo/public/cpp/bindings/lib/message.cc
index d488f18f77049..94961c5b219c3 100644
--- a/mojo/public/cpp/bindings/lib/message.cc
+++ b/mojo/public/cpp/bindings/lib/message.cc
@@ -271,7 +271,7 @@ Message::Message(base::span<const uint8_t> payload,
 
   void* buffer;
   uint32_t buffer_size;
-  DCHECK(base::IsValueInRangeForNumericType<uint32_t>(payload.size()));
+  CHECK(base::IsValueInRangeForNumericType<uint32_t>(payload.size()));
   DCHECK(base::IsValueInRangeForNumericType<uint32_t>(handles.size()));
   MojoAppendMessageDataOptions options;
   options.struct_size = sizeof(options);
