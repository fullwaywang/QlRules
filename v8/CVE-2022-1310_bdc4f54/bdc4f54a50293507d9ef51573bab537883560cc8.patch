commit bdc4f54a50293507d9ef51573bab537883560cc8	bdc4f54a50293507d9ef51573bab537883560cc8
Author: Brendon Tiszka <btiszka@gmail.com>
Date:   Fri Mar 18 01:32:54 2022 -0400

    Update write barrier when storing HeapNumber to last index.
    
    Bug: chromium:1307610
    Change-Id: I60aaa0e58e13b705b5eff4b57411a0ad4a2e9b3f
    Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/3534849
    Reviewed-by: Jakob Gruber <jgruber@chromium.org>
    Commit-Queue: Jakob Gruber <jgruber@chromium.org>
    Cr-Commit-Position: refs/heads/main@{#79538}

diff --git a/src/regexp/regexp-utils.cc b/src/regexp/regexp-utils.cc
index dabe5ee4a28..b26007191d3 100644
--- a/src/regexp/regexp-utils.cc
+++ b/src/regexp/regexp-utils.cc
@@ -49,7 +49,8 @@ MaybeHandle<Object> RegExpUtils::SetLastIndex(Isolate* isolate,
   Handle<Object> value_as_object =
       isolate->factory()->NewNumberFromInt64(value);
   if (HasInitialRegExpMap(isolate, *recv)) {
-    JSRegExp::cast(*recv).set_last_index(*value_as_object, SKIP_WRITE_BARRIER);
+    JSRegExp::cast(*recv).set_last_index(*value_as_object,
+                                         UPDATE_WRITE_BARRIER);
     return recv;
   } else {
     return Object::SetProperty(
