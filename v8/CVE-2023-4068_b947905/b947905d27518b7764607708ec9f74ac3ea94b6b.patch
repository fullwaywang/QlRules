commit b947905d27518b7764607708ec9f74ac3ea94b6b	b947905d27518b7764607708ec9f74ac3ea94b6b
Author: Manos Koukoutos <manoskouk@chromium.org>
Date:   Thu Jul 20 13:17:23 2023 +0200

    [wasm-gc] Use wasm-null as default value for wasm reference types
    
    Bug: v8:7748, chromium:1466183
    Change-Id: I6d7de33e0cec37747045269f441e65f7a482dd4f
    Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/4701553
    Auto-Submit: Manos Koukoutos <manoskouk@chromium.org>
    Reviewed-by: Jakob Kummerow <jkummerow@chromium.org>
    Commit-Queue: Jakob Kummerow <jkummerow@chromium.org>
    Cr-Commit-Position: refs/heads/main@{#89060}

diff --git a/src/wasm/constant-expression-interface.cc b/src/wasm/constant-expression-interface.cc
index 77e9488bd4d..3e589a81911 100644
--- a/src/wasm/constant-expression-interface.cc
+++ b/src/wasm/constant-expression-interface.cc
@@ -197,7 +197,11 @@ WasmValue DefaultValueForType(ValueType type, Isolate* isolate) {
     case kS128:
       return WasmValue(Simd128());
     case kRefNull:
-      return WasmValue(isolate->factory()->null_value(), type);
+      return WasmValue(
+          type == kWasmExternRef || type == kWasmNullExternRef
+              ? Handle<Object>::cast(isolate->factory()->null_value())
+              : Handle<Object>::cast(isolate->factory()->wasm_null()),
+          type);
     case kVoid:
     case kRtt:
     case kRef:
