commit 4161cd30cd12905735971047f90642cb5c1e3a3b	4161cd30cd12905735971047f90642cb5c1e3a3b
Author: Thibaud Michaud <thibaudm@google.com>
Date:   Wed Nov 2 12:10:22 2022 +0100

    Merged: [wasm] Reload cached instance fields in catch handler
    
    Revision: f517e518af26b7eac23c9e328b463eb1e8ee3499
    
    BUG=chromium:1377816
    NOTRY=true
    NOPRESUBMIT=true
    NOTREECHECKS=true
    R=jkummerow@chromium.org
    
    Change-Id: Iaf2bad43e6b2d55fa4f5c022ed85cbc2d48b1aa3
    Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/3999282
    Commit-Queue: Thibaud Michaud <thibaudm@chromium.org>
    Reviewed-by: Jakob Kummerow <jkummerow@chromium.org>
    Cr-Commit-Position: refs/branch-heads/10.8@{#24}
    Cr-Branched-From: f1bc03fd6b4c201abd9f0fd9d51fb989150f97b9-refs/heads/10.8.168@{#1}
    Cr-Branched-From: 237de893e1c0a0628a57d0f5797483d3add7f005-refs/heads/main@{#83672}

diff --git a/src/wasm/graph-builder-interface.cc b/src/wasm/graph-builder-interface.cc
index efc3ef3d54b..fb1f19c2b13 100644
--- a/src/wasm/graph-builder-interface.cc
+++ b/src/wasm/graph-builder-interface.cc
@@ -88,6 +88,7 @@ class WasmGraphBuildingInterface {
   struct TryInfo : public ZoneObject {
     SsaEnv* catch_env;
     TFNode* exception = nullptr;
+    bool first_catch = true;
 
     bool might_throw() const { return exception != nullptr; }
 
@@ -936,6 +937,10 @@ class WasmGraphBuildingInterface {
 
     TFNode* exception = block->try_info->exception;
     SetEnv(block->try_info->catch_env);
+    if (block->try_info->first_catch) {
+      LoadContextIntoSsa(ssa_env_, decoder);
+      block->try_info->first_catch = false;
+    }
 
     TFNode* if_catch = nullptr;
     TFNode* if_no_catch = nullptr;
@@ -1013,6 +1018,9 @@ class WasmGraphBuildingInterface {
     }
 
     SetEnv(block->try_info->catch_env);
+    if (block->try_info->first_catch) {
+      LoadContextIntoSsa(ssa_env_, decoder);
+    }
   }
 
   void AtomicOp(FullDecoder* decoder, WasmOpcode opcode,
