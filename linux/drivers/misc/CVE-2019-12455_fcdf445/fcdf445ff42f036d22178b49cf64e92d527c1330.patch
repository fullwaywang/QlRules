commit fcdf445ff42f036d22178b49cf64e92d527c1330
Author: Gen Zhang <blackgod016574@gmail.com>
Date:   Tue May 28 10:18:51 2019 +0800

    clk-sunxi: fix a missing-check bug in sunxi_divs_clk_setup()
    
    In sunxi_divs_clk_setup(), 'derived_name' is allocated by kstrndup().
    It returns NULL when fails. 'derived_name' should be checked.
    
    Signed-off-by: Gen Zhang <blackgod016574@gmail.com>
    Signed-off-by: Maxime Ripard <maxime.ripard@bootlin.com>

diff --git a/drivers/clk/sunxi/clk-sunxi.c b/drivers/clk/sunxi/clk-sunxi.c
index f5b1c00..830bfb7 100644
--- a/drivers/clk/sunxi/clk-sunxi.c
+++ b/drivers/clk/sunxi/clk-sunxi.c
@@ -989,6 +989,8 @@ static struct clk ** __init sunxi_divs_clk_setup(struct device_node *node,
 		if (endp) {
 			derived_name = kstrndup(clk_name, endp - clk_name,
 						GFP_KERNEL);
+			if (!derived_name)
+				return NULL;
 			factors.name = derived_name;
 		} else {
 			factors.name = clk_name;
