commit 4ce7d285a55d29b79880d0566d4b010fe1907aa9
Author: yuan <zodf0055980@gmail.com>
Date:   Fri Dec 4 19:00:22 2020 +0800

    Encoder: grow again buffer size in opj_tcd_code_block_enc_allocate_data() (fixes #1283)

diff --git a/src/lib/openjp2/tcd.c b/src/lib/openjp2/tcd.c
index 7823f268..6442669d 100644
--- a/src/lib/openjp2/tcd.c
+++ b/src/lib/openjp2/tcd.c
@@ -1248,9 +1248,10 @@ static OPJ_BOOL opj_tcd_code_block_enc_allocate_data(opj_tcd_cblk_enc_t *
     /* and +28 for https://github.com/uclouvain/openjpeg/issues/1283 (-M 44) */
     /* and +33 for https://github.com/uclouvain/openjpeg/issues/1283 (-M 4) */
     /* and +63 for https://github.com/uclouvain/openjpeg/issues/1283 (-M 4 -IMF 2K) */
+    /* and +74 for https://github.com/uclouvain/openjpeg/issues/1283 (-M 4 -n 8 -s 7,7 -I) */
     /* TODO: is there a theoretical upper-bound for the compressed code */
     /* block size ? */
-    l_data_size = 63 + (OPJ_UINT32)((p_code_block->x1 - p_code_block->x0) *
+    l_data_size = 74 + (OPJ_UINT32)((p_code_block->x1 - p_code_block->x0) *
                                     (p_code_block->y1 - p_code_block->y0) * (OPJ_INT32)sizeof(OPJ_UINT32));
 
     if (l_data_size > p_code_block->data_size) {
